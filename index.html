<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Sexophone</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div class="all">

        <h1>Sexophone</h1>
        <div class="keys">
            <div data-key="65" class="key">
                <kbd>Short</kbd>
                <span class="sound">A</span>
            </div>
            <div data-key="83" class="key">
                <kbd>Long</kbd>
                <span class="sound">S</span>
            </div>
            <div data-key="68" class="key">
                <kbd>Breathe</kbd>
                <span class="sound">D</span>
            </div>
            <div data-key="70" class="key">
                <kbd>Humm</kbd>
                <span class="sound">F</span>
            </div>
            <div data-key="71" class="key">
                <kbd>Ouum</kbd>
                <span class="sound">G</span>
            </div>
            <div data-key="72" class="key">
                <kbd>Moannn</kbd>
                <span class="sound">H</span>
            </div>
            <div data-key="74" class="key">
                <kbd>Amnnn</kbd>
                <span class="sound">J</span>
            </div>
            <div data-key="75" class="key">
                <kbd>Ouuuf</kbd>
                <span class="sound">K</span>
            </div>
            <div data-key="76" class="key">
                <kbd>AmnnA</kbd>
                <span class="sound">L</span>
            </div>
        </div>
    </div>


    <audio data-key="65" src="sounds/sf_moan_01.mp3"></audio>
    <audio data-key="83" src="sounds/SF-1moan.mp3"></audio>
    <audio data-key="68" src="sounds/SF-breathe.mp3"></audio>
    <audio data-key="70" src="sounds/SF-humm.mp3"></audio>
    <audio data-key="71" src="sounds/SF-ok.mp3"></audio>
    <audio data-key="72" src="sounds/SF-moan-female.mp3"></audio>
    <audio data-key="74" src="sounds/SF-orgasm4t.mp3"></audio>
    <audio data-key="75" src="sounds/SF-orgasm5t.mp3"></audio>
    <audio data-key="76" src="sounds/SF-violent-02t.mp3"></audio>

    <script>
        //Attach an event listener to the window
        window.addEventListener('keydown', function (e) {
            playAudio(e.keyCode);
        })

        var playAudio = function (numToPlay) {
            const audioToPlay = document.querySelector(`audio[data-key = "${numToPlay}"]`);
            const key = document.querySelector(`.key[data-key = "${numToPlay}"]`)
            if (!audioToPlay) {
                return //stop the function from running all together
            }
            audioToPlay.currentTime = 0 // rewind to the start
            audioToPlay.play()
            key.classList.add('playing');
        };

        const removeTransition = function (e) {
            if (e.propertyName !== 'transform') //skip if not a transform
                return
            this.classList.remove('playing')
        }

        //++ ver do abcjs

        //select every key on the page to listen on each one
        const keys = document.querySelectorAll('.key')
        console.log(keys)
        keys.forEach(function (key) {
            key.addEventListener('click', function () { playAudio(key.dataset.key) });
            key.addEventListener('transitionend', removeTransition)
        })

    </script>


</body>

</html>